# Apache Virtual Host Configuration for Laravel API Kit
<VirtualHost *:80>
    DocumentRoot /var/www/html/public
    
    <Directory /var/www/html/public>
        AllowOverride All
        Require all granted
        
        # Enable compression - DISABLED FOR TESTING
        # <IfModule mod_deflate.c>
        #     AddOutputFilterByType DEFLATE text/css
        #     AddOutputFilterByType DEFLATE application/javascript
        #     AddOutputFilterByType DEFLATE text/javascript
        #     AddOutputFilterByType DEFLATE text/plain
        #     AddOutputFilterByType DEFLATE text/html
        #     AddOutputFilterByType DEFLATE text/xml
        #     AddOutputFilterByType DEFLATE application/json
        #     AddOutputFilterByType DEFLATE application/xml
        # </IfModule>
        
        # Enable browser caching
        <IfModule mod_expires.c>
            ExpiresActive On
            ExpiresByType text/css "access plus 1 month"
            ExpiresByType application/javascript "access plus 1 month"
            ExpiresByType text/javascript "access plus 1 month"
            ExpiresByType image/png "access plus 1 year"
            ExpiresByType image/jpg "access plus 1 year"
            ExpiresByType image/jpeg "access plus 1 year"
            ExpiresByType image/gif "access plus 1 year"
            ExpiresByType image/ico "access plus 1 year"
            ExpiresByType image/icon "access plus 1 year"
            ExpiresByType image/x-icon "access plus 1 year"
        </IfModule>
        
        # Security headers
        <IfModule mod_headers.c>
            Header always set X-Frame-Options DENY
            Header always set X-Content-Type-Options nosniff
            Header always set X-XSS-Protection "1; mode=block"
            Header always set Referrer-Policy "strict-origin-when-cross-origin"
            Header always set Permissions-Policy "geolocation=(), microphone=(), camera=()"
            
            # CORS headers for API
            Header always set Access-Control-Allow-Methods "GET, POST, PUT, PATCH, DELETE, OPTIONS"
            Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"
            Header always set Access-Control-Max-Age "86400"
        </IfModule>
    </Directory>
    
    # Logging
    ErrorLog ${APACHE_LOG_DIR}/laravel_error.log
    CustomLog ${APACHE_LOG_DIR}/laravel_access.log combined
</VirtualHost>

# Security directives outside VirtualHost
ServerTokens Prod
ServerSignature Off
